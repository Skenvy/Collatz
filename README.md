# Collatz's "GitHub Pages"
[Source](https://github.com/Skenvy/Collatz/tree/gh-pages),
[Deployment](https://github.com/Skenvy/Collatz/deployments/activity_log?environment=github-pages),
[Site](https://skenvy.github.io/Collatz/),
[Settings](https://github.com/Skenvy/Collatz/settings/pages).

"GitHub Pages" is a feature of GitHub that allows you to deploy and host a static site from your repositories (one site _per_ repo). See more in this ["about"](https://docs.github.com/en/pages/getting-started-with-github-pages/about-github-pages).

The two methods of deploying a site for a repo are to either [publish from a branch](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#publishing-from-a-branch) (where we configure it to rebuild the deployment with GitHub's chosen workflow on each push to a specified branch (and optionally a subdirectory within that branch)), or [publishing with a custom action](https://docs.github.com/en/pages/getting-started-with-github-pages/configuring-a-publishing-source-for-your-github-pages-site#publishing-with-a-custom-github-actions-workflow) (see [how to use custom workflows to deploy pages](https://docs.github.com/en/pages/getting-started-with-github-pages/using-custom-workflows-with-github-pages) for a guide that will include [`actions/upload-pages-artifact`](https://github.com/actions/upload-pages-artifact) and [`actions/deploy-pages`](https://github.com/actions/deploy-pages)).

Besides what other cases there may be to make your own custom deployment workflow, in our case, we want to transition from GitHub's Jekyll build to a build that is essentially the same but uses a newer version of Jekyll. This has primarily been motivated by already having some source files that expect to be built with Jekyll, but we can't include the most recent subdirectory, python, because it was built with sphinx, without manually specifying to include all the paths with a folder starting with an underscore or other character that Jekyll takes to mean "ignore this folder/file", and which sphinx sprinkles liberally in its generated sites. Essentially, to include a sphinx built site as a subdirectory in a GitHub pages deployment that otherwise makes use of Jekyll for other parts of the whole site, we've got to move from "deploy from a branch" to "deploy with a custom workflow" so that we can utilise a newer version of Jekyll.

To make the transition more "jekyll"-esque, we can install the [gem](https://rubygems.org/gems/jekyll) ([source](https://github.com/jekyll/jekyll)), `gem install jekyll`, which gives use the new `jekyll new .` command to create a new jekyll project (although it doesn't want to be used in a non-empty directory so just use it somewhere else and move the new files into here). Currently, these are the [versions](https://pages.github.com/versions/) of gems that the GitHub default build and deployment uses. The versions can't be changed in the default workflow by depending on different versions in the `./Gemfile`, but in swapping to a custom workflow, the default versions can be depended on by depending on the [github-pages gems](https://rubygems.org/gems/github-pages) ([source](https://github.com/github/pages-gem)), or just setting `gem 'github-pages'` in your `./Gemfile` and doing a `bundle update`.

We might come back and do something fancier and non-standard to automate populating the inclusions list with every file in subdirectories that include `.nojekyll` files, because Jekyll doesn't care about them, and it would save having to break the "automated" workflow of coming back here and manually updating the inclusions list, but for now we'll just manually include all the "hidden" files so the sphinx site works.
