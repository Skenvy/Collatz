name: GitHub ğŸ±â€ğŸ‘¤ Pages ğŸ“„ Merger ğŸ§¬
on:
  push:
    branches:
    - 'gh-pages-*'
defaults:
  run:
    shell: bash
jobs:
  merge:
    name: GitHub ğŸ±â€ğŸ‘¤ Pages ğŸ“„ Merger ğŸ§¬
    runs-on: ubuntu-latest
    steps:
    - name: ğŸ Checkout
      uses: actions/checkout@v3
    - name: Merge ğŸ§¬${GITHUB_REF##*/}ğŸ§¬ into ğŸ±â€ğŸ‘¤ gh-pages ğŸ“„
      run: |
        export MERGE_FROM=${GITHUB_REF##*/}
        export FROM_SHA=$(git rev-parse --short=8 $GITHUB_SHA)
        export TO_SHA=$(git rev-parse --short=8 gh-pages)
        git config --local user.email "actions@github.com"
        git config --local user.name "Github Actions"
        git fetch --unshallow && git checkout gh-pages && git pull
        git merge --squash $MERGE_FROM --allow-unrelated-histories -m "Auto-merge $MERGE_FROM@($FROM_SHA) to gh-pages@($TO_SHA)"
        git push
