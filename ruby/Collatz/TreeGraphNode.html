<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1" />

<title>class Collatz::TreeGraphNode - RDoc Documentation</title>

  <meta name="keywords" content="ruby,class,Collatz::TreeGraphNode">

    <meta name="description" content="class Collatz::TreeGraphNode: Nodes that form a &quot;tree graph&quot;, structured as a tree, with their own node&#39;s value, as well as references to either possible child node, where a node c">

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<div id="navigation-toggle" role="button" tabindex="0" aria-label="Toggle sidebar" aria-expanded="true" aria-controls="navigation">
  <span aria-hidden="true">&#9776;</span>
</div>


<nav id="navigation" role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search (/) for a class, method, ..." spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
  
  <div id="parent-class-section" class="nav-section">
  <h3>Ancestors</h3>
  <ul><li>Object</li></ul>
</div>

  
  
  
  <div class="nav-section">
    <h3>Class Methods</h3>
    <ul class="link-list" role="directory">
      <li ><a href="#method-c-new">new</a></li>
    </ul>
  </div>



  <div class="nav-section">
    <h3>Instance Methods</h3>
    <ul class="link-list" role="directory">
      <li ><a href="#method-i-sub_tree_equals">sub_tree_equals</a></li>
    </ul>
  </div>



  <footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.12.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

</nav>

<main role="main" aria-labelledby="class-Collatz::TreeGraphNode">
  <h1 id="class-Collatz::TreeGraphNode" class="anchor-link class">
    class Collatz::TreeGraphNode
  </h1>

  <section class="description">
    
<p>Nodes that form a “tree graph”, structured as a tree, with their own node’s value, as well as references to either possible child node, where a node can only ever have two children, as there are only ever two reverse values. Also records any possible “terminal sequence state”, whether that be that the “orbit distance” has been reached, as an “out of bounds” stop, which is the regularly expected terminal state. Other terminal states possible however include the cycle state and cycle length (end) states.</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section anchor-link">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-node_value" class="method-detail anchor-link">
        <div class="method-heading attribute-method-heading">
          <a href="#attribute-i-node_value" title="Link to this attribute">
            <span class="method-name">node_value</span>
            <span class="attribute-access-type">[R]</span>
          </a>
        </div>

        <div class="method-description">
        <p>The value of this node in the tree.</p>
        </div>
      </div>
      <div id="attribute-i-pre_an_plus_b_node" class="method-detail anchor-link">
        <div class="method-heading attribute-method-heading">
          <a href="#attribute-i-pre_an_plus_b_node" title="Link to this attribute">
            <span class="method-name">pre_an_plus_b_node</span>
            <span class="attribute-access-type">[R]</span>
          </a>
        </div>

        <div class="method-description">
        <p>The “Pre aN+b” <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> child of this node that is present if it exists and this is not a terminal node.</p>
        </div>
      </div>
      <div id="attribute-i-pre_n_div_p_node" class="method-detail anchor-link">
        <div class="method-heading attribute-method-heading">
          <a href="#attribute-i-pre_n_div_p_node" title="Link to this attribute">
            <span class="method-name">pre_n_div_p_node</span>
            <span class="attribute-access-type">[R]</span>
          </a>
        </div>

        <div class="method-description">
        <p>The “Pre N/P” <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> child of this node that is always present if this is not a terminal node.</p>
        </div>
      </div>
      <div id="attribute-i-terminal_sequence_state" class="method-detail anchor-link">
        <div class="method-heading attribute-method-heading">
          <a href="#attribute-i-terminal_sequence_state" title="Link to this attribute">
            <span class="method-name">terminal_sequence_state</span>
            <span class="attribute-access-type">[RW]</span>
          </a>
        </div>

        <div class="method-description">
        <p>The terminal <a href="SequenceState.html"><code>SequenceState</code></a>; nil if not a terminal node, MAX_STOP_OUT_OF_BOUNDS if the max_orbit_distance has been reached, CYCLE_LENGTH if the node’s value is found to have occured previously, or CYCLE_INIT, retroactively applied when a CYCLE_LENGTH state node is found.</p>
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section anchor-link">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-c-new" title="Link to this method">
                <span class="method-name">new</span>
                <span class="method-args">(node_value, max_orbit_distance, p, a, b, cycle_check: nil, create_raw: false, terminal_sequence_state: nil, pre_n_div_p_node: nil, pre_an_plus_b_node: nil)</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/collatz/tree_graph.rb, line 55</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">node_value</span>, <span class="ruby-identifier">max_orbit_distance</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>, <span class="ruby-value">cycle_check:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">create_raw:</span> <span class="ruby-keyword">false</span>,
               <span class="ruby-value">terminal_sequence_state:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">pre_n_div_p_node:</span> <span class="ruby-keyword">nil</span>, <span class="ruby-value">pre_an_plus_b_node:</span> <span class="ruby-keyword">nil</span>)
  <span class="ruby-ivar">@node_value</span> = <span class="ruby-identifier">node_value</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">create_raw</span>
    <span class="ruby-ivar">@terminal_sequence_state</span> = <span class="ruby-identifier">terminal_sequence_state</span>
    <span class="ruby-ivar">@pre_n_div_p_node</span> = <span class="ruby-identifier">pre_n_div_p_node</span>
    <span class="ruby-ivar">@pre_an_plus_b_node</span> = <span class="ruby-identifier">pre_an_plus_b_node</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-comment"># Handle cycle prevention for recursive calls</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cycle_check</span>.<span class="ruby-identifier">nil?</span>
    <span class="ruby-identifier">cycle_check</span> = { <span class="ruby-ivar">@node_value</span> <span class="ruby-operator">=&gt;</span> <span class="ruby-keyword">self</span> }
  <span class="ruby-keyword">elsif</span> <span class="ruby-operator">!</span><span class="ruby-identifier">cycle_check</span>[<span class="ruby-ivar">@node_value</span>].<span class="ruby-identifier">nil?</span>
    <span class="ruby-comment"># The value already exists in the cycle so this is a cyclic terminal</span>
    <span class="ruby-identifier">cycle_check</span>[<span class="ruby-ivar">@node_value</span>].<span class="ruby-identifier">terminal_sequence_state</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">CYCLE_INIT</span>
    <span class="ruby-ivar">@terminal_sequence_state</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">CYCLE_LENGTH</span>
    <span class="ruby-ivar">@pre_n_div_p_node</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@pre_an_plus_b_node</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">return</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">cycle_check</span>[<span class="ruby-ivar">@node_value</span>] = <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">if</span> [<span class="ruby-value">0</span>, <span class="ruby-identifier">max_orbit_distance</span>].<span class="ruby-identifier">max</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-ivar">@terminal_sequence_state</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">MAX_STOP_OUT_OF_BOUNDS</span>
    <span class="ruby-ivar">@pre_n_div_p_node</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-ivar">@pre_an_plus_b_node</span> = <span class="ruby-keyword">nil</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">reverses</span> = <span class="ruby-constant">Collatz</span>.<span class="ruby-identifier">reverse_function</span>(<span class="ruby-identifier">node_value</span>, <span class="ruby-value">p:</span> <span class="ruby-identifier">p</span>, <span class="ruby-value">a:</span> <span class="ruby-identifier">a</span>, <span class="ruby-value">b:</span> <span class="ruby-identifier">b</span>)
    <span class="ruby-ivar">@pre_n_div_p_node</span> = <span class="ruby-constant">TreeGraphNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">reverses</span>[<span class="ruby-value">0</span>], <span class="ruby-identifier">max_orbit_distance</span><span class="ruby-value">-1</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>, <span class="ruby-value">cycle_check:</span> <span class="ruby-identifier">cycle_check</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">reverses</span>.<span class="ruby-identifier">length</span> <span class="ruby-operator">==</span> <span class="ruby-value">2</span>
      <span class="ruby-ivar">@pre_an_plus_b_node</span> = <span class="ruby-constant">TreeGraphNode</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">reverses</span>[<span class="ruby-value">1</span>], <span class="ruby-identifier">max_orbit_distance</span><span class="ruby-value">-1</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>, <span class="ruby-value">cycle_check:</span> <span class="ruby-identifier">cycle_check</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@pre_an_plus_b_node</span> = <span class="ruby-keyword">nil</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>Create an instance of <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> which will yield its entire sub-tree of all child nodes.</p>

<p>@raise <a href="FailedSaneParameterCheck.html"><code>FailedSaneParameterCheck</code></a> If p or a are 0.</p>

<p>@param <code>Integer</code> <strong>node_value:</strong> The value for which to find the tree graph node reversal.</p>

<p>@param <code>Integer</code> <strong>max_orbit_distance:</strong> The maximum distance/orbit/branch length to travel.</p>

<p>@param <code>Integer</code> <strong>p:</strong> Modulus used to divide n, iff n is equivalent to (0 mod p).</p>

<p>@param <code>Integer</code> <strong>a:</strong> Factor by which to multiply n.</p>

<p>@param <code>Integer</code> <strong>b:</strong> Value to add to the scaled value of n.</p>

<p>@param +Hash&lt;Integer&gt;+ <strong>cycle_check:</strong> A hash used to keep track of already graphed values</p>

<p>@param <code>Boolean</code> <strong>create_raw:</strong> Used to instruct the initialiser method to take 1:1 inputs, used in testing.</p>

<p>@param <a href="SequenceState.html"><code>SequenceState</code></a> <strong>terminal_sequence_state:</strong></p>

<p>@param <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> <strong>pre_n_div_p_node:</strong></p>

<p>@param <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> <strong>pre_an_plus_b_node:</strong></p>

<p>@return [TreeGraphNode] A computed tree graph node</p>
        </div>


      </div>

    </section>

     <section id="public-instance-5Buntitled-5D-method-details" class="method-section anchor-link">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

      <div id="method-i-sub_tree_equals" class="method-detail anchor-link ">
        <div class="method-header">
            <div class="method-heading">
              <a href="#method-i-sub_tree_equals" title="Link to this method">
                <span class="method-name">sub_tree_equals</span>
                <span class="method-args">(tgn)</span>
              </a>
            </div>
        </div>

          <div class="method-controls">
            <details class="method-source-toggle">
              <summary>Source</summary>
            </details>
          </div>

        <div class="method-description">
          <div class="method-source-code" id="sub_tree_equals-source">
            <pre><span class="ruby-comment"># File lib/collatz/tree_graph.rb, line 98</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">sub_tree_equals</span>(<span class="ruby-identifier">tgn</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">node_value</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">node_value</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">terminal_sequence_state</span> <span class="ruby-operator">!=</span> <span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">terminal_sequence_state</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_n_div_p_node</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">pre_n_div_p_node</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_n_div_p_node</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_n_div_p_node</span>.<span class="ruby-identifier">sub_tree_equals</span>(<span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">pre_n_div_p_node</span>)
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_an_plus_b_node</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">pre_an_plus_b_node</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-keyword">false</span> <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_an_plus_b_node</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-operator">!</span><span class="ruby-keyword">self</span>.<span class="ruby-identifier">pre_an_plus_b_node</span>.<span class="ruby-identifier">sub_tree_equals</span>(<span class="ruby-identifier">tgn</span>.<span class="ruby-identifier">pre_an_plus_b_node</span>)
  <span class="ruby-keyword">true</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          <p>This will only confirm an equality if the whole subtree of both nodes, including node values, sequence states, and child nodes, checked recursively, are equal.</p>

<p>@param <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> <strong>tgn:</strong> The <a href="TreeGraphNode.html"><code>TreeGraphNode</code></a> with which to compare equality.</p>

<p>@return <code>Boolean</code> true, if the entire sub-trees are equal.</p>
        </div>


      </div>

    </section>

  </section>
</main>

