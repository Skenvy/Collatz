<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Collatz::HailstoneSequence - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
  var index_rel_prefix = "../";
</script>

<script src="../js/navigation.js" defer></script>
<script src="../js/search.js" defer></script>
<script src="../js/search_index.js" defer></script>
<script src="../js/searcher.js" defer></script>
<script src="../js/darkfish.js" defer></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    
<div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  <p class="link">Object
</div>

    
    
    
<!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    <li ><a href="#method-c-new">::new</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Collatz::HailstoneSequence">
  <h1 id="class-Collatz::HailstoneSequence" class="class">
    class Collatz::HailstoneSequence
  </h1>

  <section class="description">
    
<p>Contains the results of computing a hailstone sequence via hailstone_sequence(~).</p>

  </section>

  <section id="5Buntitled-5D" class="documentation-section">



    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      <div id="attribute-i-terminal_condition" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">terminal_condition</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>A terminal condition that reflects the final state of the hailstone sequencing, whether than be that it succeeded at determining the stopping time, the total stopping time, found a cycle, or got stuck on zero (or surpassed the max total).</p>
        </div>
      </div>
      <div id="attribute-i-terminal_status" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">terminal_status</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>A status value that has different meanings depending on what the terminal condition was. If the sequence completed either via reaching the stopping or total stopping time, or getting stuck on zero, then this value is the stopping/terminal time. If the sequence got stuck on a cycle, then this value is the cycle length. If the sequencing passes the maximum stopping time then this is the value that was provided as that maximum.</p>
        </div>
      </div>
      <div id="attribute-i-values" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">values</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        <p>The set of values that comprise the hailstone sequence.</p>
        </div>
      </div>
    </section>


     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

      <div id="method-c-new" class="method-detail ">
        <div class="method-heading">
          <span class="method-name">new</span><span
            class="method-args">(initial_value, p, a, b, max_total_stopping_time, total_stopping_time)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>

        <div class="method-description">
          <p>Initialise and compute a new Hailstone Sequence.</p>

<p>@raise <a href="FailedSaneParameterCheck.html"><code>FailedSaneParameterCheck</code></a> If p or a are 0.</p>

<p>@param <code>Integer</code> initial_value The value to begin the hailstone sequence from.</p>

<p>@param <code>Integer</code> <strong>p:</strong> Modulus used to devide n, iff n is equivalent to (0 mod p).</p>

<p>@param <code>Integer</code> <strong>a:</strong> Factor by which to multiply n.</p>

<p>@param <code>Integer</code> <strong>b:</strong> Value to add to the scaled value of n.</p>

<p>@param <code>Integer</code> <strong>max_total_stopping_time:</strong> Maximum amount of times to iterate the function, if 1 is not reached.</p>

<p>@param <code>Boolean</code> <strong>total_stopping_time:</strong> Whether or not to execute until the “total” stopping time (number of iterations to obtain 1) rather than the regular stopping time (number of iterations to reach a value less than the initial value).</p>

<p>@return <a href="HailstoneSequence.html"><code>HailstoneSequence</code></a> An initialised, and computed, hailstone sequence</p>

          <div class="method-source-code" id="new-source">
            <pre><span class="ruby-comment"># File lib/collatz/hailstone_sequence.rb, line 43</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier ruby-title">initialize</span>(<span class="ruby-identifier">initial_value</span>, <span class="ruby-identifier">p</span>, <span class="ruby-identifier">a</span>, <span class="ruby-identifier">b</span>, <span class="ruby-identifier">max_total_stopping_time</span>, <span class="ruby-identifier">total_stopping_time</span>)
  <span class="ruby-identifier">terminate</span> = <span class="ruby-identifier">stopping_time_terminus</span>(<span class="ruby-identifier">initial_value</span>, <span class="ruby-identifier">total_stopping_time</span>)
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">initial_value</span>.<span class="ruby-identifier">zero?</span>
    <span class="ruby-comment"># 0 is always an immediate stop.</span>
    <span class="ruby-ivar">@values</span> = [<span class="ruby-value">0</span>]
    <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">ZERO_STOP</span>
    <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">elsif</span> <span class="ruby-identifier">initial_value</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
    <span class="ruby-comment"># 1 is always an immediate stop, with 0 stopping time.</span>
    <span class="ruby-ivar">@values</span> = [<span class="ruby-value">1</span>]
    <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">TOTAL_STOPPING_TIME</span>
    <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-value">0</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-comment"># Otherwise, hail!</span>
    <span class="ruby-identifier">min_max_total_stopping_time</span> = [<span class="ruby-identifier">max_total_stopping_time</span>, <span class="ruby-value">1</span>].<span class="ruby-identifier">max</span>
    <span class="ruby-identifier">pre_values</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">min_max_total_stopping_time</span><span class="ruby-value">+1</span>)
    <span class="ruby-identifier">pre_values</span>[<span class="ruby-value">0</span>] = <span class="ruby-identifier">initial_value</span>
    <span class="ruby-keyword">for</span> <span class="ruby-identifier">k</span> <span class="ruby-keyword">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">min_max_total_stopping_time</span> <span class="ruby-keyword">do</span>
      <span class="ruby-identifier">next_value</span> = <span class="ruby-constant">Collatz</span>.<span class="ruby-identifier">function</span>(<span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span><span class="ruby-value">-1</span>], <span class="ruby-value">p:</span> <span class="ruby-identifier">p</span>, <span class="ruby-value">a:</span> <span class="ruby-identifier">a</span>, <span class="ruby-value">b:</span> <span class="ruby-identifier">b</span>)
      <span class="ruby-comment"># Check if the next_value hailstone is either the stopping time, total</span>
      <span class="ruby-comment"># stopping time, the same as the initial value, or stuck at zero.</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">terminate</span>.<span class="ruby-identifier">call</span>(<span class="ruby-identifier">next_value</span>)
        <span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">next_value</span>
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_value</span> <span class="ruby-operator">==</span> <span class="ruby-value">1</span>
          <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">TOTAL_STOPPING_TIME</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">STOPPING_TIME</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-identifier">k</span>
        <span class="ruby-ivar">@values</span> = <span class="ruby-identifier">pre_values</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">k</span><span class="ruby-value">+1</span>)
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">pre_values</span>.<span class="ruby-identifier">include?</span> <span class="ruby-identifier">next_value</span>
        <span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">next_value</span>
        <span class="ruby-identifier">cycle_init</span> = <span class="ruby-value">1</span>
        <span class="ruby-keyword">for</span> <span class="ruby-identifier">j</span> <span class="ruby-keyword">in</span> <span class="ruby-value">1</span><span class="ruby-operator">..</span><span class="ruby-identifier">k</span> <span class="ruby-keyword">do</span>
          <span class="ruby-keyword">if</span> <span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span><span class="ruby-operator">-</span><span class="ruby-identifier">j</span>] <span class="ruby-operator">==</span> <span class="ruby-identifier">next_value</span>
            <span class="ruby-identifier">cycle_init</span> = <span class="ruby-identifier">j</span>
            <span class="ruby-keyword">break</span>
          <span class="ruby-keyword">end</span>
        <span class="ruby-keyword">end</span>
        <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">CYCLE_LENGTH</span>
        <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-identifier">cycle_init</span>
        <span class="ruby-ivar">@values</span> = <span class="ruby-identifier">pre_values</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">k</span><span class="ruby-value">+1</span>)
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">next_value</span>.<span class="ruby-identifier">zero?</span>
        <span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-value">0</span>
        <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">ZERO_STOP</span>
        <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-operator">-</span><span class="ruby-identifier">k</span>
        <span class="ruby-ivar">@values</span> = <span class="ruby-identifier">pre_values</span>.<span class="ruby-identifier">slice</span>(<span class="ruby-value">0</span>, <span class="ruby-identifier">k</span><span class="ruby-value">+1</span>)
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">end</span>
      <span class="ruby-identifier">pre_values</span>[<span class="ruby-identifier">k</span>] = <span class="ruby-identifier">next_value</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-ivar">@terminal_condition</span> = <span class="ruby-constant">SequenceState</span><span class="ruby-operator">::</span><span class="ruby-constant">MAX_STOP_OUT_OF_BOUNDS</span>
    <span class="ruby-ivar">@terminal_status</span> = <span class="ruby-identifier">min_max_total_stopping_time</span>
    <span class="ruby-ivar">@values</span> = <span class="ruby-identifier">pre_values</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
        </div>


      </div>

    </section>

  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

